.. note::

    Hallo und willkommen in der SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasten-Gemeinschaft auf Facebook! Tauchen Sie tiefer ein in die Welt von Raspberry Pi, Arduino und ESP32 mit anderen Enthusiasten.

    **Warum beitreten?**

    - **Expertenunterst√ºtzung**: L√∂sen Sie Nachverkaufsprobleme und technische Herausforderungen mit Hilfe unserer Gemeinschaft und unseres Teams.
    - **Lernen & Teilen**: Tauschen Sie Tipps und Anleitungen aus, um Ihre F√§higkeiten zu verbessern.
    - **Exklusive Vorschauen**: Erhalten Sie fr√ºhzeitigen Zugang zu neuen Produktank√ºndigungen und exklusiven Einblicken.
    - **Spezialrabatte**: Genie√üen Sie exklusive Rabatte auf unsere neuesten Produkte.
    - **Festliche Aktionen und Gewinnspiele**: Nehmen Sie an Gewinnspielen und Feiertagsaktionen teil.

    üëâ Sind Sie bereit, mit uns zu erkunden und zu erschaffen? Klicken Sie auf [|link_sf_facebook|] und treten Sie heute bei!

.. _per_water_tank:

2.6 Intelligenter Wassertank
=============================

In diesem Projekt verwenden wir einen Wasserstandssensor und ein Servo, um einen intelligenten Wassertank zu simulieren. Der Wasserstandssensor ist im Tank angebracht, um den Wasserstand zu messen. Sobald dieser unter einen bestimmten Schwellenwert f√§llt, √∂ffnet das vom Servo gesteuerte Ventil, um Wasser nachzuf√ºllen.

**Ben√∂tigte Komponenten**

F√ºr dieses Projekt werden die folgenden Komponenten ben√∂tigt.

Es ist definitiv praktisch, ein komplettes Set zu kaufen. Hier ist der Link:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Name
        - KOMPONENTEN IN DIESEM SET
        - LINK
    *   - Kepler Kit
        - 450+
        - |link_kepler_kit|

Alternativ k√∂nnen die Komponenten auch einzeln √ºber die untenstehenden Links erworben werden.

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - KOMPONENTE
        - ANZAHL
        - LINK

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro-USB-Kabel
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - Mehrere
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_servo`
        - 1
        - |link_servo_buy|
    *   - 6
        - :ref:`cpn_water_level`
        - 1
        - 

**Verkabelung**

|pin_adc|

Der Pico W verf√ºgt √ºber drei GPIO-Pins, die analoge Eingaben nutzen k√∂nnen: GP26, GP27, GP28, also die analogen Kan√§le 0, 1 und 2.
Dar√ºber hinaus gibt es einen vierten analogen Kanal, der mit dem eingebauten Temperatursensor verbunden ist und hier nicht weiter behandelt wird.

|water_tank0|

* S des Wasserstandssensors ist mit GP26(A0) verbunden, + mit VBUS, - Pin mit GND.
* Das orangefarbene Kabel (Signal) des Servos ist mit GP15 verbunden, das rote Kabel (Strom) mit VBUS und das braune Kabel (Masse) mit GND.

**Code**

.. note::

    * Sie k√∂nnen sich am untenstehenden Bild orientieren, um den Code per Drag-and-Drop zu erstellen.
    * Importieren Sie ``2.6_water_tank.png`` aus dem Verzeichnis ``kepler-kit-main\piper``. F√ºr detaillierte Anleitungen siehe :ref:`import_code_piper`.

|water_tank|

Nach dem Anschluss von Pico W klicken Sie auf die **Start**-Taste und der Code wird ausgef√ºhrt. Wenn der Wasserstand unter ein Drittel des Sensors f√§llt, dreht sich das Servo auf 180 Grad, um den Einlass zu √∂ffnen; ist der Wasserstand h√∂her als ein Drittel des Sensors, dreht sich das Servo auf 0 Grad, um den Einlass zu schlie√üen.

**Funktionsweise**

|water_tank1|

Stellen Sie die Rotationsgeschwindigkeit von Pin 15 (Servo) auf 15% ein.

* [servo pin() set speed to ()%]: Dient zur Einstellung der Rotationsgeschwindigkeit des Servo-Pins. Der Bereich liegt zwischen 0% und 100%.

|water_tank2|

Liest den Wert von Pin A0 und speichert ihn in der Variable [water_level].

* [set (water_level) to]: Dient zur Einstellung des Variablenwerts. Die Variable muss aus der **Variables**-Palette erstellt werden.
* [read voltage from pin ()]: Dient zum Ablesen der Spannung der analogen Pins (A0~A2). Der Bereich liegt zwischen 0 und 3,3 V.

|water_tank3|

Legen Sie den Spannungsschwellenwert auf 1 fest. Wenn die Spannung des Wasserstandssensors unter 1 liegt, soll sich das Servo auf die 180¬∞-Position drehen, andernfalls auf die 0¬∞-Position.

* [servo pin () set angle to ()]: Stellt den Winkel des Servo-Pins ein. Der Bereich liegt zwischen 0 und 180 Grad.
