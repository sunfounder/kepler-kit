.. _per_lucky_cat:

2.9 Glückskatze
==========================

In diesem Projekt verwenden wir ein PIR-Modul und ein Servo, um eine Glückskatze zu bauen. Das PIR-Modul dient zur Erkennung von Besuchern, während das Servo die winkende Bewegung der Glückskatze nachahmt.

**Benötigte Komponenten**

Für dieses Projekt benötigen wir die folgenden Komponenten.

Ein komplettes Set zu kaufen ist definitiv praktisch. Hier ist der Link:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Name
        - KOMPONENTEN IN DIESEM SET
        - LINK
    *   - Kepler Kit
        - 450+
        - |link_kepler_kit|

Sie können die Komponenten auch einzeln über die untenstehenden Links erwerben.

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - KOMPONENTE
        - ANZAHL
        - LINK

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro-USB-Kabel
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - Mehrere
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_servo`
        - 1
        - |link_servo_buy|
    *   - 6
        - :ref:`cpn_pir`
        - 1
        - |link_pir_buy|

**Verkabelung**

|lucky_cat0|

* Das orangefarbene Kabel (Signal) des Servos ist mit GP15 verbunden, das rote Kabel (Stromversorgung) mit VBUS und das braune Kabel (Masse) mit GND.
* Der mittlere Pin des PIR-Moduls ist mit GP3 verbunden.

**Code**

.. note::

    * Sie können sich an der Abbildung unten orientieren, um den Code per Drag-and-Drop zu schreiben.
    * Importieren Sie ``2.9_lucky_cat.png`` aus dem Verzeichnis ``kepler-kit-main\piper``. Detaillierte Anleitungen finden Sie unter :ref:`import_code_piper`.

|lucky_cat|

* Nach dem Anschluss des Pico W klicken Sie auf die **Start**-Taste, und der Code wird ausgeführt.
* Wenn das PIR-Modul einen Kunden erkennt, schwingt das Servo fünfmal hin und her und bleibt dann stehen.

**So funktioniert es**

|lucky_cat1|

Stellen Sie die Drehgeschwindigkeit des Pins15 (Servo) auf 15% ein.

|lucky_cat2|

Wenn GP14 niedrig ist, setzen Sie die Variable [prestate] auf 0. Wenn die Variable [prestate] 0 ist und GP14 hoch ist (Mensch erkannt), setzen Sie die Variable [prestate] auf 1.

Ziel ist es, den Hauptcode nur auszuführen, wenn GP14 von niedrig auf hoch wechselt, und nur einmal zu reagieren, wenn das PIR-Modul weiterhin Menschen erkennt.

|lucky_cat3|

Lassen Sie das Servo 5-mal zwischen 0 und 180 Grad rotieren.

* [repeat () times do]: Führen Sie den Code im Do-Block eine bestimmte Anzahl von Malen aus.
