.. _per_reversing_system:

2.11 逆転警報システム
==========================

このプロジェクトでは、超音波モジュールとアクティブブザーを使用して逆転警報システムを作成します。超音波モジュールは距離を検出し、ブザーは距離に応じて異なる周波数の警報音を発します。

**必要なコンポーネント**

このプロジェクトで必要なコンポーネントは以下の通りです。

キット全体を購入するのが便利です、リンクはこちら：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前	
        - このキットに含まれるアイテム
        - リンク
    *   - Kepler Kit	
        - 450+
        - |link_kepler_kit|

以下のリンクから個別にも購入できます。

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - コンポーネント	
        - 数量
        - リンク

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro USBケーブル
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - 数本
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_transistor`
        - 1(S8050)
        - |link_transistor_buy|
    *   - 6
        - :ref:`cpn_resistor`
        - 1(1KΩ)
        - |link_resistor_buy|
    *   - 7
        - アクティブ :ref:`cpn_buzzer`
        - 1
        - 
    *   - 8
        - :ref:`cpn_ultrasonic`
        - 1
        - |link_ultrasonic_buy|


**配線**

|reversing_system0|

* 超音波モジュールのEchoとTrigピンは、同時にGP15に接続されています。これにより、超音波モジュールはGP15から信号を送受信します。
* トランジスタの中央ピンは、1kΩの抵抗器を介してGP14に接続されています。

**コード**

.. note::

    * 下の画像を参照して、ドラッグ&ドロップでコードを書くことができます。
    * ``kepler-kit-main\piper`` のパスから ``2.11_reversing_system.png`` をインポートしてください。詳細なチュートリアルは、 :ref:`import_code_piper` を参照してください。

|reversing_system|

* Pico Wを接続した後、 **スタート** ボタンをクリックしてコードを実行します。
* 超音波検出距離が5cm未満の場合、ブザーは鋭い音（0.1秒）を発します。
* 検出距離が5〜10cmの場合、ブザーはやや遅い音（0.5秒）を発します。
* 検出距離が10cm以上の場合、1秒ごとに音声プロンプトがあります。

**仕組み**

|reversing_system1|

超音波検出の距離（cm）を読み取り、変数[distance]に格納します。

|reversing_system2|

距離が5以下の場合、変数[intervals]を0.1秒に設定します。変数[intervals]はブザー音の間隔です。

|reversing_system3|

距離が5より大きく、10以下の場合、[intervals]を0.5秒に設定します。

|reversing_system4|

距離が10より大きい場合、[intervals]の時間を1秒に設定します。

|reversing_system5|

最後に、[intervals]秒ごとにブザーが鳴るようにします。

