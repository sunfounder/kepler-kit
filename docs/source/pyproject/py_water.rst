.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæŽ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ðŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æŽ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _py_water:

2.14 æ°´ä½ã‚’æ„ŸçŸ¥ã™ã‚‹
=====================================

|img_water_sensor|

ã“ã®æ°´ã‚»ãƒ³ã‚µãƒ¼ã¯ã€é›¨é‡ã€æ°´ä½ã€ã•ã‚‰ã«ã¯æ¶²ä½“æ¼ã‚Œã‚’æ¤œçŸ¥ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®ã‚»ãƒ³ã‚µãƒ¼ã¯ã€æ°´æ»´/æ°´é‡ã®å¤§ãã•ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã«ä¸€é€£ã®éœ²å‡ºã—ãŸå¹³è¡Œãªãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¦æ°´ä½ã‚’æ¸¬å®šã—ã¾ã™ã€‚æ°´é‡ã¯ç°¡å˜ã«ã‚¢ãƒŠãƒ­ã‚°ä¿¡å·ã«å¤‰æ›ã•ã‚Œã€å‡ºåŠ›ã‚¢ãƒŠãƒ­ã‚°å€¤ã¯ã€æ°´ä½è­¦å ±åŠ¹æžœã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœãƒ¼ãƒ‰ã§ç›´æŽ¥èª­ã¿å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

.. warning:: 

    ã‚»ãƒ³ã‚µãƒ¼ã¯å®Œå…¨ã«æ°´ã«æµ¸ã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚åæœ¬ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãŒã‚ã‚‹éƒ¨åˆ†ã ã‘ã‚’æ°´ã«è§¦ã‚Œã•ã›ã¦ãã ã•ã„ã€‚ã¾ãŸã€æ¹¿åº¦ã®é«˜ã„ç’°å¢ƒã§ã‚»ãƒ³ã‚µãƒ¼ã«é›»åŠ›ã‚’ä¾›çµ¦ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ¼ãƒ–ã®è…é£ŸãŒåŠ é€Ÿã—ã€ã‚»ãƒ³ã‚µãƒ¼ã®å¯¿å‘½ãŒçŸ­ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€èª­ã¿å–ã‚Šã‚’è¡Œã†éš›ã«ã®ã¿é›»åŠ›ã‚’ä¾›çµ¦ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

* :ref:`cpn_water_level`

**å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ã‚­ãƒƒãƒˆå…¨ä½“ã‚’è³¼å…¥ã™ã‚‹ã“ã¨ãŒä¾¿åˆ©ã§ã™ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã«å«ã¾ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - ã‚±ãƒ—ãƒ©ãƒ¼ã‚­ãƒƒãƒˆ	
        - 450+
        - |link_kepler_kit|

ä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹ã€…ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ	
        - æ•°é‡
        - ãƒªãƒ³ã‚¯

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - ãƒžã‚¤ã‚¯ãƒ­USBã‚±ãƒ¼ãƒ–ãƒ«
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - æ•°æœ¬
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_water_level`
        - 1
        - 

**å›žè·¯å›³**

|sch_water|


**é…ç·š**

|wiring_water|

**ã‚³ãƒ¼ãƒ‰**

.. note::

    * ``kepler-kit-main/micropython`` ã®ãƒ‘ã‚¹ã«ã‚ã‚‹ ``2.14_feel_the_water_level.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’Thonnyã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ãã®å¾Œã€ã€ŒRun Current Scriptã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹F5ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

    * ç”»é¢ã®å³ä¸‹éš…ã«ã‚ã‚‹ã€ŒMicroPythonï¼ˆRaspberry Pi Picoï¼‰ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚

    * è©³ç´°ãªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã€ :ref:`open_run_code_py` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

.. code-block:: python

    import machine
    import utime

    sensor = machine.ADC(28)

    while True:
        value = sensor.read_u16()
        print(value)
        utime.sleep_ms(200)

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ãŸå¾Œã€æ°´ã‚»ãƒ³ã‚µãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚†ã£ãã‚Šã¨æ°´ã«æµ¸ã‘ã¾ã™ã€‚æ·±ã•ãŒå¢—ã™ã¨ã€ã‚·ã‚§ãƒ«ã¯ã‚ˆã‚Šå¤§ããªå€¤ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

**è©³ã—ãå­¦ã¶**

ã‚¢ãƒŠãƒ­ã‚°å…¥åŠ›ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€æ°´ã‚»ãƒ³ã‚µãƒ¼ã®ä¹¾ç‡¥ã—ãŸç’°å¢ƒã§ã®èª­ã¿å–ã‚Šå€¤ã‚’è¨˜éŒ²ã—ã€ãã‚Œã‚’é–¾å€¤ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚æ¬¡ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å®Œäº†ã—ã€æ°´ã‚»ãƒ³ã‚µãƒ¼ã®èª­ã¿å–ã‚Šå€¤ã‚’å†åº¦èª­ã¿å–ã‚Šã¾ã™ã€‚æ°´ã‚»ãƒ³ã‚µãƒ¼ã®èª­ã¿å–ã‚Šå€¤ãŒä¹¾ç‡¥ã—ãŸç’°å¢ƒã§ã®èª­ã¿å–ã‚Šå€¤ã¨å¤§ãããšã‚Œã¦ã„ã‚‹å ´åˆã€æ¶²ä½“ã«è§¦ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã“ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’æ°´é“ç®¡ã®è¿‘ãã«ç½®ãã¨ã€æ°´é“ç®¡ãŒæ¼ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’æ¤œå‡ºã§ãã¾ã™ã€‚

.. note::

    * ``kepler-kit-main/micropython`` ã®ãƒ‘ã‚¹ã«ã‚ã‚‹ ``2.14_water_level_threshold.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’Thonnyã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ãã®å¾Œã€ã€ŒRun Current Scriptã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹F5ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

    * ç”»é¢ã®å³ä¸‹éš…ã«ã‚ã‚‹ã€ŒMicroPythonï¼ˆRaspberry Pi Picoï¼‰ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚

    * è©³ç´°ãªãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã€ :ref:`open_run_code_py` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

.. code-block:: python

    import machine
    import utime

    sensor = machine.ADC(28)
    threshold = 30000  # ã“ã®å€¤ã¯ç’°å¢ƒã«å¿œã˜ã¦ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

    while True:
        value = sensor.read_u16()
        if value > threshold:
            print("Liquid leakage!")
        utime.sleep_ms(200)

