.. _py_pump:

3.6 ポンピング
=======================

小型の遠心ポンプは、自動植物水やりプロジェクトに適しています。
また、ちょっとしたスマートな水の仕掛けを作るためにも使用できます。

その動力源は電動モーターで、通常のモーターと全く同じ方法で駆動されます。

* :ref:`cpn_pump`
* :ref:`cpn_motor`
* :ref:`cpn_ta6586`
* :ref:`cpn_power_module`

.. note::

    #. チューブをモーターの出口に接続し、ポンプを水に浸し、電源を投入します。
    #. 水位が常にモーターよりも高いことを確認する必要があります。アイドリングは、発熱と騒音を発生させ、モーターを破損する可能性があります。
    #. 植物に水をやる場合、土が吸い込まれるのを防ぐ必要があります。これはポンプを詰まらせる原因となる可能性があります。
    #. チューブから水が出ない場合、チューブ内に残留水があり、エアフローを妨げている可能性があり、まずは排水が必要です。

**必要なコンポーネント**

このプロジェクトでは、以下のコンポーネントが必要です。

すべてを一つのキットで購入するのが便利です、リンクはこちら：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前	
        - このキットに含まれるアイテム
        - リンク
    *   - ケプラーキット	
        - 450以上
        - |link_kepler_kit|

以下のリンクから個別にも購入できます。

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - コンポーネント	
        - 個数
        - リンク

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro USBケーブル
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - 数本
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_ta6586`
        - 1
        - 
    *   - 6
        - :ref:`cpn_lipo_charger`
        - 1
        -  
    *   - 7
        - 18650バッテリー
        - 1
        -  
    *   - 8
        - バッテリーホルダー
        - 1
        -  
    *   - 9
        - :ref:`cpn_pump`
        - 1
        -  


**回路図**

|sch_pump|

**配線**

.. note::

    * ポンプは高電流を必要とするため、安全性を考慮してここではLi-poチャージャーモジュールを使用してモーターに電力を供給します。
    * Li-poチャージャーモジュールが図に示されているように接続されていることを確認してください。そうでないと、短絡が発生し、バッテリーや回路が損傷する可能性が高くなります。

|wiring_pump|

**コード**

.. note::

    * ``kepler-kit-main/micropython`` のパスの下で ``3.6_pumping.py`` ファイルを開くか、このコードをThonnyにコピーしてから、「Run Current Script」をクリックするか、単にF5を押して実行してください。
    
    * 右下隅の「MicroPython（Raspberry Pi Pico）」インタープリターをクリックするのを忘れないでください。

    * 詳細なチュートリアルは、 :ref:`open_run_code_py` を参照してください。

.. code-block:: python

    import machine
    import utime

    motor1A = machine.Pin(14, machine.Pin.OUT)
    motor2A = machine.Pin(15, machine.Pin.OUT)

    while True:
        motor1A.high()
        motor2A.low()

コードが実行された後、ポンプが動作を開始し、同時にチューブから水が流れ出るのを確認できます。

.. note::

    * 「停止」ボタンをクリックした後もモーターが回転し続けている場合は、この時点でGNDへのワイヤーでPico Wの **RUN** ピンをリセットする必要があります。その後、このワイヤーを抜いてコードを再度実行してください。

    * これは、モーターが過度な電流で動作しているため、Pico Wがコンピュータから切断される可能性があるためです。

    |wiring_run_reset|
