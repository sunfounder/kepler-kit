.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

7. ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
====================================

ã“ã®è¨˜äº‹ã§ã¯ã€Pico Wã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰å›è·¯ã‚’æ“ä½œã—ãŸã‚Šã€ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®èª­ã¿å–ã‚Šã‚’å–å¾—ã§ãã‚‹ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã«ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

|setup_web|

**1. å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

ä¸€å¼ã‚’è³¼å…¥ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚ã“ã¡ã‚‰ãŒãƒªãƒ³ã‚¯ã§ã™ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã«å«ã¾ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - ã‚±ãƒ—ãƒ©ãƒ¼ã‚­ãƒƒãƒˆ	
        - 450+
        - |link_kepler_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ	
        - æ•°é‡
        - ãƒªãƒ³ã‚¯

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - ãƒã‚¤ã‚¯ãƒ­USBã‚±ãƒ¼ãƒ–ãƒ«
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - æ•°æœ¬
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_resistor`
        - 4(1-330Î©, 2-220Î©, 1-10KÎ©)
        - |link_resistor_buy|
    *   - 6
        - :ref:`cpn_rgb`
        - 1
        - |link_rgb_led_buy|
    *   - 7
        - :ref:`cpn_thermistor`
        - 1
        - |link_thermistor_buy|
    *   - 8
        - :ref:`cpn_lipo_charger`
        - 1
        -  
    *   - 9
        - 18650ãƒãƒƒãƒ†ãƒªãƒ¼
        - 1
        -  
    *   - 10
        - ãƒãƒƒãƒ†ãƒªãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼
        - 1
        -  

**2. å›è·¯ã‚’çµ„ã¿ç«‹ã¦ã‚‹**

    .. warning:: 
        
        å›³ã«ç¤ºã•ã‚Œã¦ã„ã‚‹é€šã‚Šã€Li-poãƒãƒ£ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã§ãªã„ã¨ã€ã‚·ãƒ§ãƒ¼ãƒˆå›è·¯ãŒèµ·ãã¦ãƒãƒƒãƒ†ãƒªãƒ¼ã‚„å›è·¯ãŒæå‚·ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

.. image:: img/wiring/7.web_page_bb.png
    :width: 800



**3. ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹**

#. ``kepler-kit-main/iot`` ã®ãƒ‘ã‚¹ã®ä¸‹ã«ã‚ã‚‹ ``7_web_page.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚
#. **Run current script** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€F5ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚æ¥ç¶šãŒæˆåŠŸã™ã‚‹ã¨ã€Pico Wã®IPãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. image:: img/7_web_server.png

    .. note::

        ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€Pico Wã« ``do_connect.py`` ã¨ ``secrets.py`` ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã‚‚ã—ãªã‘ã‚Œã°ã€ :ref:`iot_access` ã‚’å‚ç…§ã—ã¦ä½œæˆã—ã¦ãã ã•ã„ã€‚

#. Pico Wã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«å…¥åŠ›ã—ã¦ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã«æ§‹ç¯‰ã•ã‚ŒãŸã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ä»»æ„ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€RGB LEDã®è‰²ã‚’å¤‰æ›´ã—ã€æ¸©åº¦ã¨æ¹¿åº¦ã‚’æ›´æ–°ã—ã¾ã™ã€‚

    .. image:: img/web-1.png
        :width: 500

#. ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€Raspberry Pi Pico Wã« ``main.py`` ã¨ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚

**å‹•ä½œåŸç†ã¯ï¼Ÿ**

ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã¯å®Ÿéš›ã«ã¯ä½•ã‚‰ã‹ã®ã‚µãƒ¼ãƒãƒ¼ã§ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ãŠã‚Šã€ãã®ã‚µãƒ¼ãƒãƒ¼ã®ã‚½ã‚±ãƒƒãƒˆãŒè¨ªå•æ™‚ã«ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚
ã‚½ã‚±ãƒƒãƒˆã¨ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãŒæ¥ç¶šã‚’å¸Œæœ›ã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å¾…ã¡å—ã‘ã‚‹æ–¹æ³•ã§ã™ã€‚

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Pico WãŒã‚µãƒ¼ãƒãƒ¼ã§ã‚ã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ä»‹ã—ã¦Pico Wã§ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã¾ã™ã€‚

æœ€åˆã«ã‚½ã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ |link_port| ãŒå¿…è¦ã§ã™ã€‚
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã¨IPã®å–å¾—æ–¹æ³•ã¯ã€ :ref:`iot_access` ã§èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒãƒ¼ãƒˆã«ã¯80ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ã‚½ã‚±ãƒƒãƒˆã®è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ãã‚Œã‚’è¿”ã—ã¦æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ä½¿ç”¨ã—ã¾ã™ã€‚

`socket library - Python Docs <https://docs.python.org/3/library/socket.html>`_ 

.. code-block:: python

    import socket

    def open_socket(ip):
        # ã‚½ã‚±ãƒƒãƒˆã‚’é–‹ã
        address = (ip, 80)
        connection = socket.socket()
        connection.bind(address)
        connection.listen(1)
        print(connection)
        return(connection)

æ¬¡ã«ã€ä»¥å‰ã«è¨­å®šã—ãŸã‚½ã‚±ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¨­å®šã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€Pico Wã¯ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹è¦æ±‚ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

.. code-block:: python

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            client.close()

æ¬¡ã«ã€è¨ªå•è€…ã«é€ä¿¡ã™ã‚‹htmlãƒšãƒ¼ã‚¸ãŒå¿…è¦ã§ã™ã€‚ã“ã®ä¾‹ã§ã¯ã€å¤‰æ•° ``html`` ã«æ–‡å­—å½¢å¼ã§å˜ç´”ãªhtmlãƒšãƒ¼ã‚¸ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚

.. note:: 
    è‡ªåˆ†ã§htmlã‚’æ›¸ããŸã„å ´åˆã¯ã€ |link_html| ã§ãƒ˜ãƒ«ãƒ—ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

.. code-block:: python

    def webpage(value):
        html = f"""
                <!DOCTYPE html>
                <html>
                <body>
                <form action="./red">
                <input type="submit" value="red " />
                </form>
                <form action="./green">
                <input type="submit" value="green" />
                </form>
                <form action="./blue">
                <input type="submit" value="blue" />
                </form>
                <form action="./off">
                <input type="submit" value="off" />
                </form>
                <p>æ¸©åº¦ã¯{value}åº¦ã§ã™</p>
                </body>
                </html>
                """
        return html


è¨ªå•è€…ã«HTMLãƒšãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã€‚

.. code-block:: python
    :emphasize-lines: 5,6

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            html = webpage(0)
            client.send(html)
            client.close()

ä¸Šè¨˜ã®éƒ¨åˆ†ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚åŠ¹æœã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’Thonnyã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

.. code-block:: python

    import machine
    import socket

    from secrets import *
    from do_connect import *

    def webpage(value):
        html = f"""
                <!DOCTYPE html>
                <html>
                <body>
                <form action="./red">
                <input type="submit" value="èµ¤" />
                </form>
                <form action="./green">
                <input type="submit" value="ç·‘" />
                </form>
                <form action="./blue">
                <input type="submit" value="é’" />
                </form>
                <form action="./off">
                <input type="submit" value="ã‚ªãƒ•" />
                </form>
                <p>æ¸©åº¦ã¯{value}åº¦ã§ã™</p>
                </body>
                </html>
                """
        return html

    def open_socket(ip):
        # ã‚½ã‚±ãƒƒãƒˆã‚’é–‹ã
        address = (ip, 80)
        connection = socket.socket()
        connection.bind(address)
        connection.listen(1)
        print(connection)
        return(connection)

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            html = webpage(0)
            client.send(html)
            client.close()

    try:
        ip = do_connect()
        if ip is not None:
            connection = open_socket(ip)
            serve(connection)
    except KeyboardInterrupt:
        machine.reset()

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã€RGB LEDã®åˆ¶å¾¡ã‚„ã‚»ãƒ³ã‚µãƒ¼ã®èª­ã¿å–ã‚Šã¯è¨±å¯ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
ã“ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã¯ã•ã‚‰ã«æ´—ç·´ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

æœ€åˆã«çŸ¥ã‚‹ã¹ãã“ã¨ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã«ã‚µãƒ¼ãƒãƒ¼ãŒå—ã‘å–ã‚‹æƒ…å ±ã§ã™ã€‚ãã‚Œã‚†ãˆã«ã€ ``serve()`` ã‚’ã‚ãšã‹ã«å¤‰æ›´ã—ã¦ ``request`` ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

.. code-block:: python
    :emphasize-lines: 5,6

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            request = str(request)
            print(request)
            html = webpage(0)
            client.send(html)
            client.close()

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å†å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚·ã‚§ãƒ«ã¯ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã§ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ãã«ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

.. code-block:: 

    b'GET /red? HTTP/1.1\r\nHost: 192.168.18.162\r\nConnection: keep-alive.......q=0.5\r\n\r\n'
    b'GET /favicon.ico HTTP/1.1\r\nHost: 192.168.18.162\r\nConnection: keep-alive.......q=0.5\r\n\r\n'
    b'GET /blue? HTTP/1.1\r\nHost: 192.168.18.162\r\nConnection: keep-alive.......q=0.5\r\n\r\n'
    b'GET /favicon.ico HTTP/1.1\r\nHost: 192.168.18.162\r\nConnection: keep-alive.......q=0.5\r\n\r\n'

èª­ã‚€ã«ã¯é•·ã™ãã¾ã™ï¼


ã—ã‹ã—ã€å®Ÿéš›ã«å¿…è¦ãªã®ã¯ ``/red?`` ã‚„ ``/blue?`` ã®å‰ã«ã‚ã‚‹å°ã•ãªæƒ…å ±ã ã‘ã§ã™ã€‚
ã“ã‚Œã¯ã©ã®ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã®ã‹ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ãã‚Œã§ã€ã‚­ãƒ¼ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã®æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹ãŸã‚ã« ``serve()`` ã‚’å°‘ã—æ”¹è‰¯ã—ã¾ã—ãŸã€‚

.. code-block:: python
    :emphasize-lines: 6,7,8,9

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            request = str(request)
            try:
                request = request.split()[1]
            except IndexError:
                pass
            print(request)  
            html = webpage(0)
            client.send(html)
            client.close()

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å†å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã§ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã€ã‚·ã‚§ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã—ã¾ã™ã€‚

.. code-block:: 

    /red?
    /favicon.ico
    /blue?
    /favicon.ico
    /off?
    /favicon.ico

æ¬¡ã«ã€ ``request`` ã®å€¤ã«å¿œã˜ã¦RGB LEDã®è‰²ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã™ã€‚

.. code-block:: python

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            request = str(request)
            try:
                request = request.split()[1]
            except IndexError:
                pass
            
            print(request)
            
            if request == '/off?':
                red.low()
                green.low()
                blue.low()
            elif request == '/red?':
                red.high()
                green.low()
                blue.low()
            elif request == '/green?':
                red.low()
                green.high()
                blue.low()
            elif request == '/blue?':
                red.low()
                green.low()
                blue.high()
            
            html = webpage(0)
            client.send(html)
            client.close()

æœ€å¾Œã«ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã‚µãƒ¼ãƒŸã‚¹ã‚¿ãƒ¼ã®å€¤ã‚’è¡¨ç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã‚µãƒ¼ãƒŸã‚¹ã‚¿ãƒ¼ã®ä½¿ç”¨æ–¹æ³•ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ :ref:`py_temp` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼‰ã€‚
ã“ã®éƒ¨åˆ†ã¯å®Ÿéš›ã«ã¯HTMLã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã•ã‚Œã¾ã™ã€‚
``webpage(value)`` é–¢æ•°ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã€å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã‚‹æ•°å­—ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

.. code-block:: python
    :emphasize-lines: 30,31

    def serve(connection):
        while True:
            client = connection.accept()[0]
            request = client.recv(1024)
            request = str(request)
            try:
                request = request.split()[1]
            except IndexError:
                pass
            
            #print(request)
            
            if request == '/off?':
                red.low()
                green.low()
                blue.low()
            elif request == '/red?':
                red.high()
                green.low()
                blue.low()
            elif request == '/green?':
                red.low()
                green.high()
                blue.low()
            elif request == '/blue?':
                red.low()
                green.low()
                blue.high()

            value = '%.2f' % temperature()    
            html = webpage(value)
            client.send(html)
            client.close()

.. https://projects.raspberrypi.org/en/projects/get-started-pico-w/3
