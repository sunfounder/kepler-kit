.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

8. @Anvilã‚’ç”¨ã„ãŸWebã‚¢ãƒ—ãƒªã®æ§‹ç¯‰
===================================

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Raspberry Pi Pico Wã¨Anvilã®ã‚µãƒ¼ãƒãƒ¼ã¨ã®é–“ã§åŒæ–¹å‘é€šä¿¡ã‚’è¡Œã„ã¾ã™ã€‚
Pico Wã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹æ¸©åº¦ã¨æ¹¿åº¦ã¯Anvilã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã•ã‚‰ã«ã€Anvilã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãã‚ŒãŒPico Wã®I2C LCD1602ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

|anvil|

**1. å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

å…¨ä½“ã®ã‚­ãƒƒãƒˆã‚’è³¼å…¥ã™ã‚‹æ–¹ãŒç¢ºå®Ÿã«ä¾¿åˆ©ã§ã™ã€‚ãƒªãƒ³ã‚¯ã¯ã“ã¡ã‚‰ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰	
        - ã“ã®ã‚­ãƒƒãƒˆã«å«ã¾ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - ã‚±ãƒ—ãƒ©ãƒ¼ã‚­ãƒƒãƒˆ	
        - 450ä»¥ä¸Š
        - |link_kepler_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹ã€…ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ	
        - æ•°é‡
        - ãƒªãƒ³ã‚¯

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro USBã‚±ãƒ¼ãƒ–ãƒ«
        - 1
        - 
    *   - 3
        - :ref:`cpn_breadboard`
        - 1
        - |link_breadboard_buy|
    *   - 4
        - :ref:`cpn_wire`
        - è¤‡æ•°
        - |link_wires_buy|
    *   - 5
        - :ref:`cpn_i2c_lcd`
        - 1
        - |link_i2clcd1602_buy|
    *   - 6
        - :ref:`cpn_dht11`
        - 1
        - |link_dht22_buy|
    *   - 7
        - :ref:`cpn_lipo_charger`
        - 1
        -  
    *   - 8
        - 18650ãƒãƒƒãƒ†ãƒªãƒ¼
        - 1
        -  
    *   - 9
        - ãƒãƒƒãƒ†ãƒªãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼
        - 1
        -  

**2. å›è·¯ã‚’çµ„ã‚€**

    .. warning:: 
        
        å›³ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«Li-poãƒãƒ£ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã§ãªã„å ´åˆã€çŸ­çµ¡ãŒç™ºç”Ÿã—ã¦ãƒãƒƒãƒ†ãƒªãƒ¼ã¨å›è·¯ãŒæå‚·ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

.. image:: img/wiring/8.anvil_bb.png
    :width: 800


**3. Anvilã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹**

1. |link_anvil| ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ **Start building** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

    .. image:: img/anvil-1.png

2. ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã¾ãŸã¯ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

    .. image:: img/anvil-2.png

3. **æ–°ã—ã„ãƒ–ãƒ©ãƒ³ã‚¯ã‚¢ãƒ—ãƒª** ã‚’ä½œæˆã—ã¾ã™ã€‚

    .. image:: img/anvil-3.png

4. **ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ** ã‚’é¸æŠã—ã¾ã™ã€‚

    .. image:: img/anvil-4.png

5. ã“ã‚Œã§ã‚¢ãƒ—ãƒªã®ç·¨é›†ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚

    .. image:: img/anvil-5.png

6. ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ **Label** ãƒ„ãƒ¼ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ **Drop title here** ã«é…ç½®ã—ã¾ã™ã€‚

    .. image:: img/anvil-6.png

7. **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£** ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä¸‹ã® **ãƒ†ã‚­ã‚¹ãƒˆ** ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ãƒ©ãƒ™ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã§ãã¾ã™ã€‚

    .. image:: img/anvil-7.png

8. åŒæ§˜ã«ã€å³å´ã« **TextBox** ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¾ã™ã€‚

    .. image:: img/anvil-17.png

9. **ãƒœã‚¿ãƒ³** ã‚’å³ç«¯ã«ãƒ‰ãƒ©ãƒƒã‚°ã—ã€ **ãƒ†ã‚­ã‚¹ãƒˆ** ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚ã“ã®ãƒœã‚¿ãƒ³ã¯Raspberry Pi Pico Wã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã€Œé€ä¿¡ã€ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-14.png

10. **SHOW** ãƒœã‚¿ãƒ³ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ¼ãƒ ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã€ãã® **ãƒœã‚¿ãƒ³** ã®ã‚³ãƒ¼ãƒ‰ãŒå¼·èª¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚µãƒ¼ãƒãƒ¼ï¼ˆã“ã®å ´åˆã€Pico Wï¼‰å†…ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

    .. code-block:: python
    
        anvil.server.call_s("show_message",self.text_box_1.text)

    * ``show_message`` ã¯Pico WãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã•ã‚ŒãŸã¨ãã«å®šç¾©ã•ã‚Œã‚‹é–¢æ•°ã§ã™ã€‚
    * ``self.text_box_1.text`` ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã«å…¥åŠ›ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚Šã€ ``show_message()`` ã«ãƒ‘ã‚¹ã‚¹ãƒ«ãƒ¼ã¨ã—ã¦é€ä¿¡ã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-15.png

11. ãƒ‡ã‚¶ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã£ã¦ã€åˆ¥ã®ãƒ©ãƒ™ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ä»¥å‰ã®è¦ç´ ã®ä¸‹ã«é…ç½®ã—ã¾ã™ã€‚ã“ã®ãƒ©ãƒ™ãƒ«ã¯Pico Wã‹ã‚‰ã®DHT11ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

    .. image:: img/anvil-9.png

12. **ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹** ã§ **More Components** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ **Timer** ã‚’ãƒ•ã‚©ãƒ¼ãƒ ã«ãƒ‰ãƒ©ãƒƒã‚°ã—ã¾ã™ã€‚

    .. image:: img/anvil-12.png

13. **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£** ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¿ã‚¤ãƒãƒ¼ã‚’3ç§’ã®é–“éš”ã«è¨­å®šã—ã¾ã™ã€‚ã“ã®æ™‚é–“ã¯ã€ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ç”»é¢ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-18.png

14. **Timer** ãƒ„ãƒ¼ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã—ã¾ã™ã€‚ ``anvil.server.call_s()`` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€Anvilã‚¢ãƒ—ãƒªã«è¡¨ç¤ºã™ã‚‹å¿…è¦ã®ã‚ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã™ã‚‹ãŸã‚ã® ``publish_data()`` é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã€ãã‚Œã‚’ ``self.label_2.text`` ã«å‰²ã‚Šå½“ã¦ã¦å®Œäº†ã—ã¾ã™ã€‚

    .. code-block:: python

        data=anvil.server.call_s("publish_data")
        self.label_2.text=data
    
    .. image:: img/anvil-16.png

15. ã“ã®æ™‚ç‚¹ã§ã€Anvilã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹å¿…è¦ã®ã‚ã‚‹éƒ¨åˆ†ã¯å®Œäº†ã§ã™ã€‚Anvilã®ä½¿ç”¨ã«é–¢ã™ã‚‹è©³ç´°ã¯ã€ |link_anvil_docs| ã§ç¢ºèªã§ãã¾ã™ã€‚


**4. Pico Wã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

Anvilã‚µãƒ¼ãƒ“ã‚¹ã¸ã®Raspberry Pi Pico Wã®æ¥ç¶šã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã€Anvilã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚Pico Wã®ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã¯MicroPythonã§æ›¸ã‹ã‚Œã¦ãŠã‚Šã€USBãƒ‰ãƒ©ã‚¤ãƒ–ã¨ã—ã¦ï¼ˆboot.pyã¨main.pyã®2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒã¤å½¢ã§ï¼‰èªè­˜ã•ã‚Œã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå§‹ã‚ã‚‹å‰ã«ã€Pico Wã«ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã—ã€Wi-Fiã«æ¥ç¶šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

1. Raspberry Pi Pico Wç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ |link_anvil_firmware| ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚å®Œå…¨ç‰ˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-p-1.png

2. Pico Wã® **BOOTSEL** ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãªãŒã‚‰ã€ãƒã‚¤ã‚¯ãƒ­USBã‚±ãƒ¼ãƒ–ãƒ«ã§ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æ¥ç¶šã—ã¾ã™ã€‚ãƒ‰ãƒ©ã‚¤ãƒ–RPI-RP2ãŒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€BOOTSELã‚’é›¢ã—ã¾ã™ã€‚

    .. image:: img/anvil-p-2.png
        :width: 300

3. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã°ã‹ã‚Šã® ``.uf2`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã™ã€‚ã“ã®æ™‚ç‚¹ã§Pico Wã¯ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚å®Œäº†ã™ã‚‹ã¨ã€ ``main.py`` ã¨ ``boot.py`` ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. note::
        ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å‰ã«ã€Pico Wã«ä¿å­˜ã•ã‚ŒãŸé‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãã ã•ã„ã€‚

    .. image:: img/anvil-p-3.png

4. Thonny IDEã§ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã¨ã—ã¦"MicroPython(Raspberry Pi Pico).COMXX"ã‚’é¸æŠã—ã¾ã™ã€‚ **View** -> **Files** ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‰ãƒ©ã‚¤ãƒ–ã¨Raspberry Pi Picoã®ãƒãƒ¼ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-20.png

5. ``boot.py`` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã€WiFiã® ``SSID`` ã¨ ``PASSWORD`` ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

    .. image:: img/anvil-21.png

**5. ã‚³ãƒ¼ãƒ‰ã®å®Œæˆ**

#. ``kepler-kit-main/libs`` ã®ãƒ‘ã‚¹ã‹ã‚‰ ``dht.py`` ã¨ ``lcd1602.py`` ã‚’Raspberry Pi Pico Wã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

    .. image:: img/anvil-22.png

#. ``main.py`` ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§å…ƒã®ã‚³ãƒ¼ãƒ‰ã‚’ç½®ãæ›ãˆã¾ã™ã€‚

    .. code-block:: python

        import anvil.pico
        import uasyncio as a
        from machine import Pin,I2C

        from lcd1602 import LCD
        lcd = LCD()

        from dht import DHT11
        sensor = DHT11(Pin(16, Pin.OUT, Pin.PULL_DOWN))

        UPLINK_KEY = "<uplink_key_goes_here>"

        @anvil.pico.callable(is_async=True)
        async def show_message(text):
            print(f"show anvil's input message: {text}")
            lcd.clear()
            lcd.message(text)
            return

        @anvil.pico.callable(is_async=True)
        async def publish_data():
            sensor.measure()
            return "Temperature: {}, Humidity: {}".format(sensor.temperature, sensor.humidity)

        anvil.pico.connect(UPLINK_KEY)

#. Anvilã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«æˆ»ã‚Šã€App Browserã®è¨­å®šã§Uplinkã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã—ã¾ã™ã€‚

    .. image:: img/anvil-p-6.png

#. **Enable the Anvil Server Uplink for this app** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€uplinkã‚­ãƒ¼ã‚’å–å¾—ã—ã¾ã™ã€‚

    .. image:: img/anvil-p-7.png

#. ãã‚Œã‚’ã‚³ãƒ”ãƒ¼ã—ã€ ``main.py`` ã® ``<uplink_key_goes_here>`` ã‚’ç½®ãæ›ãˆã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä½œæˆã—ãŸAnvil APPã«Pico WãŒæ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

    .. image:: img/anvil-p-8.png



**6. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿè¡Œ**

1. **Run current script** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€F5ã‚’æŠ¼ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚æ¥ç¶šãŒæˆåŠŸã™ã‚‹ã¨ã€Shellã«æ¥ç¶šæˆåŠŸã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. image:: img/anvil-19.png

2. Anvilã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã§ã€Anvil APPã‹ã‚‰æ¸©åº¦ã¨æ¹¿åº¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ãŸå¾Œã« **SHOW** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€I2C LCD1602ã«å…¥åŠ›ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. note::
        å…¥åŠ›ã—ãŸæ–‡å­—ãŒI2C LCD1602ã«è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è£å´ã«ã‚ã‚‹ãƒãƒ†ãƒ³ã‚·ãƒ§ãƒ¡ãƒ¼ã‚¿ã‚’å›ã—ã¦ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’èª¿æ•´ã§ãã¾ã™ã€‚

    .. image:: img/anvil-r-2.png

**7. APPã®å…¬é–‹**

ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚’ä»–äººã¨å…±æœ‰ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§å…±æœ‰ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

1. **Anvil** ãƒšãƒ¼ã‚¸ã«æˆ»ã£ã¦ã€ **App Browser settings** å†…ã® **publish app** ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

    .. image:: img/anvil-s-1.png

2. **Share via private link** ã‚¿ãƒ–ã«ã¯ãƒªãƒ³ã‚¯ã®ãƒªã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®ãƒªãƒ³ã‚¯ã‚’é€šã˜ã¦èª°ã§ã‚‚ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

    .. image:: img/anvil-s-2.png

3. ãƒªãƒ³ã‚¯ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã¯ç›´æ¥ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

    .. image:: img/anvil-s-3.png

4. å…¬é–‹ãƒªãƒ³ã‚¯ã‚’é€šã˜ã¦ã‚‚ã‚¢ãƒ—ãƒªã‚’å…±æœ‰ã§ãã¾ã™ã€‚ç‹¬è‡ªã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’å…¥åŠ›ã—ã€ä¸‹ã® **Apply** ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ‰åŠ¹ã«ã—ã¾ã™ã€‚

    .. image:: img/anvil-s-4.png

**ä»•çµ„ã¿ã¯ï¼Ÿ**

ä»¥ä¸‹ã¯ã€Pico Wã¨Anvil APPã®é€šä¿¡ã®åŸºæœ¬ã¨ãªã‚‹ ``main.py`` ã®åŸºæœ¬ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

.. code-block:: python

    import anvil.pico
    import uasyncio as a

    UPLINK_KEY = "<uplink_key_goes_here>"

    anvil.pico.connect(UPLINK_KEY)

dht11ã¨lcd1602ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€‚ã“ã‚Œã‚‰2ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ç”¨æ–¹æ³•ã®è©³ç´°ã¯ã€ :ref:`py_dht11` ã¨ :ref:`py_lcd` ã§ç¢ºèªã§ãã¾ã™ã€‚

.. code-block:: python
    :emphasize-lines: 5,6

    from machine import Pin,I2C

    from lcd1602 import LCD
    lcd = LCD()

    from dht import DHT11
    sensor = DHT11(Pin(16, Pin.OUT, Pin.PULL_DOWN))

Anvilã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ï¼ˆPico Wï¼‰ã®2ã¤ã®å†…éƒ¨é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚

æœ€åˆã¯ ``show_message()`` ã§ã€ã“ã®é–¢æ•°ã¯Anvilã§å…¥åŠ›ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’LCDã«è¡¨ç¤ºã•ã›ã‚‹å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚
ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ ``@anvil.pico.callable(is_async=True)`` ã¯ã€ã“ã®é–¢æ•°ã‚’Anvilã‹ã‚‰å‘¼ã³å‡ºã—å¯èƒ½ã«ã—ã¾ã™ã€‚

.. code-block:: python

    @anvil.pico.callable(is_async=True)
    async def show_message(text):
        print(f"show anvil's input message: {text}")
        lcd.clear()
        lcd.message(text)
        return

æ¬¡ã¯ ``publish_data()`` ã§ã€ã“ã‚Œã¯dht11ã®å€¤ã‚’å–å¾—ã—ã€æ¸©åº¦ã¨æ¹¿åº¦ã‚’Anvilã«è¿”ã™æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‚ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ ``@anvil.pico.callable(is_async=True)`` ã‚’ä½¿ç”¨ã—ã¦ã€Anvilã‹ã‚‰å‘¼ã³å‡ºã—å¯èƒ½ã«ã—ã¾ã™ã€‚

.. code-block:: python

    @anvil.pico.callable(is_async=True)
    async def publish_data():
        sensor.measure()
        return "Temperature: {}, Humidity: {}".format(sensor.temperature, sensor.humidity)

