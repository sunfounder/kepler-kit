.. note::

    ã“ã‚“ã«ã¡ã¯ã€SunFounderã®Raspberry Pi & Arduino & ESP32æ„›å¥½å®¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã‚ˆã†ã“ãï¼Facebookä¸Šã§Raspberry Piã€Arduinoã€ESP32ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±ãæ˜ã‚Šä¸‹ã’ã€ä»–ã®æ„›å¥½å®¶ã¨äº¤æµã—ã¾ã—ã‚‡ã†ã€‚

    **å‚åŠ ã™ã‚‹ç†ç”±ã¯ï¼Ÿ**

    - **ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚µãƒãƒ¼ãƒˆ**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã€è²©å£²å¾Œã®å•é¡Œã‚„æŠ€è¡“çš„ãªèª²é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚
    - **å­¦ã³ï¼†å…±æœ‰**ï¼šãƒ’ãƒ³ãƒˆã‚„ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’äº¤æ›ã—ã¦ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
    - **ç‹¬å çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šæ–°è£½å“ã®ç™ºè¡¨ã‚„å…ˆè¡Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æ—©æœŸã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã€‚
    - **ç‰¹åˆ¥å‰²å¼•**ï¼šæœ€æ–°è£½å“ã®ç‹¬å å‰²å¼•ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚
    - **ç¥­ã‚Šã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚®ãƒ•ãƒˆ**ï¼šã‚®ãƒ•ãƒˆã‚„ç¥æ—¥ã®ãƒ—ãƒ­ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¾ã—ã‚‡ã†ã€‚

    ğŸ‘‰ ç§ãŸã¡ã¨ä¸€ç·’ã«æ¢ç´¢ã—ã€å‰µé€ ã™ã‚‹æº–å‚™ã¯ã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ[|link_sf_facebook|]ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä»Šã™ãå‚åŠ ã—ã¾ã—ã‚‡ã†ï¼

.. _iot_access:

1. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
===========================

Raspberry Pi Pico Wã¯ã€Raspberry Pi Picoã¨éå¸¸ã«ä¼¼ã¦ãŠã‚Šã€GPIOã€microUSBãƒãƒ¼ãƒˆã€ã‚µã‚¤ã‚ºãŒåŒã˜ã§ã™ã€‚å”¯ä¸€ã®é•ã„ã¯ã€Infineonã‹ã‚‰ã®CYW43439 2.4-GHz Wi-Fiãƒãƒƒãƒ—ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ç‚¹ã§ã™ã€‚
ãã‚Œã§ã¯ã€ã©ã®ã‚ˆã†ã«ã—ã¦ç§ãŸã¡ã®Wi-Fiãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã™ã‚‹ã®ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

**å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚

ã“ã¡ã‚‰ãŒä¸€å¼ã‚’è³¼å…¥ã™ã‚‹ä¾¿åˆ©ãªãƒªãƒ³ã‚¯ã§ã™ï¼š

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - åå‰
        - ã“ã®ã‚­ãƒƒãƒˆã«å«ã¾ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ 
        - ãƒªãƒ³ã‚¯
    *   - Kepler Kit
        - 450+
        - |link_kepler_kit|

ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å€‹åˆ¥ã«è³¼å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚


.. list-table::
    :widths: 5 20 5 20
    :header-rows: 1

    *   - SN
        - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        - å€‹æ•°
        - ãƒªãƒ³ã‚¯

    *   - 1
        - :ref:`cpn_pico_w`
        - 1
        - |link_picow_buy|
    *   - 2
        - Micro USB Cable
        - 1
        - 


1. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶š
------------------------------------

ã‚ãšã‹5è¡Œã®MicroPythonã§ã€Raspberry Pi Pico Wã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚‰5è¡Œã®ã‚³ãƒ¼ãƒ‰ã¯ã€Shellã‹ã‚‰ç›´æ¥å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã€å…¥åŠ›å¾Œã« ``Enter`` ã‚­ãƒ¼ã‚’æŠ¼ã—ã¾ã™ã€‚
ã¾ãŸã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã«å¾“ã£ã¦æ–°ã—ã„ ``.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚

.. code-block:: python

    import network
    wlan = network.WLAN(network.STA_IF)
    wlan.active(True)
    wlan.connect("SSID","PASSWORD")
    print(wlan.isconnected())

#. Thonnyã® **æ–°è¦ä½œæˆ** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ–°ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã€ ``SSID`` ã¨ ``PASSWORD`` ã‚’è‡ªåˆ†ã®ã‚‚ã®ã«å¤‰æ›´ã—ã¾ã™ã€‚

    .. image:: img/access1.png

#. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ **ç¾åœ¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€F5ã‚­ãƒ¼ã‚’æŠ¼ã—ã¾ã™ã€‚æ¥ç¶šãŒæˆåŠŸã™ã‚‹ã¨ã€ ``true`` ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

    .. note::

        Raspberry Pi Pico WãŒUSBã‚±ãƒ¼ãƒ–ãƒ«ã§ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€å³ä¸‹ã®ã‚³ãƒ¼ãƒŠãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦MicroPythonï¼ˆRaspberry Pi Picoï¼‰.COMXxxã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã¨ã—ã¦é¸æŠã—ã¾ã™ã€‚

    .. image:: img/access2.png


2. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆåˆ¤æ–­ã¨IPã®è¡¨ç¤º
-----------------------------------------------

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ³ãŒè‰¯ããªã„å ´åˆã‚’è€ƒæ…®ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®åˆ¤æ–­ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚

æ¥ç¶šã«æˆåŠŸã™ã‚‹ã¨ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œã—ãŸå¾Œã«ã€Pico Wã®IPãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

.. code-block:: python

    import network
    import time

    wlan = network.WLAN(network.STA_IF)
    wlan.active(True)
    wlan.connect("SSID","PASSWORD")

    # Wait for connect or fail
    wait = 10
    while wait > 0:
        if wlan.status() < 0 or wlan.status() >= 3:
            break
        wait -= 1
        print('waiting for connection...')
        time.sleep(1)

    # Handle connection error
    if wlan.status() != 3:
        raise RuntimeError('wifi connection failed')
    else:
        print('connected')
        print('IP: ', wlan.ifconfig()[0])

.. image:: img/access3.png

* ``wlan.status()`` é–¢æ•°ï¼šç„¡ç·šæ¥ç¶šã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¿”ã—ã¾ã™ã€æˆ»ã‚Šå€¤ã¯ä»¥ä¸‹ã®è¡¨ã«ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

    .. list-table::
        :widths: 40 10 50

        * - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
          - å€¤
          - èª¬æ˜
        * - STAT_IDLE 
          - 0 
          - æ¥ç¶šã‚‚æ´»å‹•ã‚‚ãªã—
        * - STAT_CONNECTING 
          - 1 
          - æ¥ç¶šä¸­
        * - STAT_WRONG_PASSWORD 
          - -3 
          - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸æ­£ãªãŸã‚å¤±æ•—
        * - STAT_NO_AP_FOUND 
          - -2 
          - ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆãŒå¿œç­”ã—ãªã„ãŸã‚å¤±æ•—
        * - STAT_CONNECT_FAIL 
          - -1 
          - ãã®ä»–ã®å•é¡Œã«ã‚ˆã‚‹å¤±æ•—
        * - STAT_GOT_IP 
          - 3 
          - æ¥ç¶šæˆåŠŸ

* ``wlan.ifconfig()`` é–¢æ•°ï¼šIPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã€ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã€DNSã‚µãƒ¼ãƒãƒ¼ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ç›´æ¥å‘¼ã³å‡ºã•ã‚ŒãŸå ´åˆã€ä¸Šè¨˜ã®æƒ…å ±ã‚’å«ã‚€4ã‚¿ãƒ—ãƒ«ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®å ´åˆã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

*  `class WLAN â€“ MicroPython Docs <https://docs.micropython.org/en/latest/library/network.WLAN.html>`_

.. _create_secrets:

3. ``secrets.py`` ã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæƒ…å ±ã‚’ä¿å­˜
----------------------------------------------------------

Pico Wãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å…±æœ‰ã™ã‚‹éš›ã€Wi-Fiã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚„APIã‚­ãƒ¼ã‚’ä»–äººã«è¦‹ã‚‰ã‚ŒãŸããªã„ã§ã—ã‚‡ã†ã€‚
ã‚ˆã‚Šé«˜ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã€ ``secrets.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæƒ…å ±ã‚’ä¿å­˜ã§ãã¾ã™ã€‚

#. ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’Thonnyã§æ–°ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚ ``SSID`` ã¨ ``PASSWORD`` ã¯è‡ªåˆ†ã®ã‚‚ã®ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

    .. code-block:: python

        secrets = {
        'ssid': 'SSID',
        'password': 'PASSWORD',
        }

#. ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€ ``Ctrl+S`` ã‚’æŠ¼ã™ã¨è¡¨ç¤ºã•ã‚Œã‚‹ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§Raspberry Pi Picoã‚’é¸æŠã—ã¾ã™ã€‚

    .. image:: img/access4.png

#. åå‰ã‚’ ``secrets.py`` ã«è¨­å®šã—ã¾ã™ã€‚

    .. image:: img/access5.png

#. ã“ã‚Œã§ã€ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯Raspberry Pi Pico Wã§è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

    .. image:: img/access6.png

#. ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ¬¡ã®ã‚ˆã†ã«å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚å®Ÿè¡Œã™ã‚‹ã¨ã€Wi-Fiæ¥ç¶šãŒæˆåŠŸã™ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ ``secrets.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã®ã§ã€æƒ…å ±ã®æ¼æ´©ã‚’å¿ƒé…ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

    .. code-block:: python
        :emphasize-lines: 3,7

        import network
        import time
        from secrets import secrets

        wlan = network.WLAN(network.STA_IF)
        wlan.active(True)
        wlan.connect(secrets['ssid'], secrets['password'])

        # Wait for connect or fail
        wait = 10
        while wait > 0:
            if wlan.status() < 0 or wlan.status() >= 3:
                break
            wait -= 1
            print('waiting for connection...')
            time.sleep(1)

        # Handle connection error
        if wlan.status() != 3:
            raise RuntimeError('wifi connection failed')
        else:
            print('connected')
            print('IP: ', wlan.ifconfig()[0])

    .. image:: img/access8.png

.. _do_connect:

4. ``do_connect.py`` ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶š
--------------------------------------------------------------

æ¬¡ã€…ã¨è¡Œã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãŒå¿…è¦ã¨ãªã‚‹ãŸã‚ã€æ–°ã—ã„ ``do_connect.py`` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦é–¢é€£ã™ã‚‹é–¢æ•°ã‚’ãã“ã«è¨˜è¿°ã—ã€å†åˆ©ç”¨ã™ã‚‹ã®ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’å¤§å¹…ã«ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

#. ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ–°ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ”ãƒ¼ã—ã€Raspberry Pi Picoã« ``do_connect.py`` ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚

    .. code-block:: python

        import network
        import time
        from secrets import *

        def do_connect(ssid=secrets['ssid'],psk=secrets['password']):
            wlan = network.WLAN(network.STA_IF)
            wlan.active(True)
            wlan.connect(ssid, psk)

            # Wait for connect or fail
            wait = 10
            while wait > 0:
                if wlan.status() < 0 or wlan.status() >= 3:
                    break
                wait -= 1
                print('waiting for connection...')
                time.sleep(1)

            # Handle connection error
            if wlan.status() != 3:
                raise RuntimeError('wifi connection failed')
            else:
                print('connected')
                ip=wlan.ifconfig()[0]
                print('network config: ', ip)
                return ip

    .. image:: img/access7.png

#. ä»¥ä¸‹ã®ã‚ˆã†ã«ä»–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å‘¼ã³å‡ºã™ã¨ã€Raspberry Pi Pico Wã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«æ¥ç¶šã•ã‚Œã¾ã™ã€‚

    .. code-block:: python

        from do_connect import *
        do_connect()


.. https://www.tomshardware.com/reviews/raspberry-pi-pico-w
